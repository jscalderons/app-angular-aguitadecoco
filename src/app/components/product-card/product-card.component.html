<div class="card bg-white">
    <div class="card-header bg-transparent border-bottom-0">
        <h4 [title]="product.title">{{ product.title }}</h4>
    </div>
    <img src="/assets/images/coco.png" class="img-fluid" alt="Producto de coco">
    <div class="card-body">
        <p class="card-text text-muted">{{ product.description | truncate:95 }}</p>
    </div>
    <div class="card-footer border-top-0 bg-transparent">
        <h5 class="text-right">
            <small class="text-discount" *ngIf="product.discount">{{ product.price | currency }}</small>
            {{ product.discount || product.price | currency }}
        </h5>
        <div *ngIf="!findItem(product.id); then addButton else quantityInput"></div>
        <ng-template #addButton>
            <button class="btn btn-block btn-outline-primary btn-sm" 
                (click)="addItemToCart(product)" >
                Agregar al carrito
            </button>
        </ng-template>
        <ng-template #quantityInput>
            <div class="input-group input-group-sm" *ngIf="findItem(product.id) as item">
                <div class="input-group-prepend">
                    <button class="btn btn-outline-primary" type="button" id="quantity-addon" (click)="minus(item)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="18" height="18" fill="none"
                            stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                            <path d="M2 16 L30 16" />
                        </svg>
                    </button>
                </div>
                <input type="number" 
                    class="form-control quantity-control" 
                    aria-describedby="quantity-addon"
                    [value]="item.quantity"
                    readonly>
                <div class="input-group-prepend">
                    <button class="btn btn-outline-primary" type="button" id="quantity-addon" (click)="plus(item)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="18" height="18" fill="none"
                            stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                            <path d="M16 2 L16 30 M2 16 L30 16" />
                        </svg>
                    </button>
                </div>
            </div>
        </ng-template>
    </div>
</div>
